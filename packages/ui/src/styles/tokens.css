/* ============================================================
   Design Tokens - HSL-based semantic color system
   ============================================================
   All color tokens use raw HSL values (no hsl() wrapper) so
   Tailwind's opacity modifier works: bg-primary/10
   ============================================================ */

:root {
  /* --- Core semantic tokens --- */
  --background: 0 0% 100%;
  --foreground: 224 71.4% 4.1%;

  --card: 0 0% 100%;
  --card-foreground: 224 71.4% 4.1%;

  --popover: 0 0% 100%;
  --popover-foreground: 224 71.4% 4.1%;

  --primary: 220.9 39.3% 11%;
  --primary-foreground: 210 20% 98%;

  --secondary: 220 14.3% 95.9%;
  --secondary-foreground: 220.9 39.3% 11%;

  --muted: 220 14.3% 95.9%;
  --muted-foreground: 220 8.9% 46.1%;

  --accent: 220 14.3% 95.9%;
  --accent-foreground: 220.9 39.3% 11%;

  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 20% 98%;

  --border: 220 13% 91%;
  --input: 220 13% 91%;
  --ring: 224 71.4% 4.1%;
  --radius: 0.75rem;

  /* --- Extended semantic: status --- */
  --success: 142 76% 36%;
  --success-foreground: 0 0% 100%;
  --warning: 38 92% 50%;
  --warning-foreground: 0 0% 100%;
  --info: 217 91% 60%;
  --info-foreground: 0 0% 100%;

  /* --- Surface elevation system --- */
  --surface-0: 0 0% 100%;
  --surface-1: 220 14.3% 97.5%;
  --surface-2: 220 13% 95%;
  --surface-3: 220 12% 92%;
  --surface-4: 220 11% 88%;

  /* --- Shadow elevation system --- */
  --shadow-xs: 0 1px 2px 0 hsl(0 0% 0% / 0.05);
  --shadow-sm: 0 1px 3px 0 hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
  --shadow-md: 0 4px 6px -1px hsl(0 0% 0% / 0.1), 0 2px 4px -2px hsl(0 0% 0% / 0.1);
  --shadow-lg: 0 10px 15px -3px hsl(0 0% 0% / 0.1), 0 4px 6px -4px hsl(0 0% 0% / 0.1);
  --shadow-xl: 0 20px 25px -5px hsl(0 0% 0% / 0.1), 0 8px 10px -6px hsl(0 0% 0% / 0.1);
  --shadow-2xl: 0 25px 50px -12px hsl(0 0% 0% / 0.25);

  /* --- Layout & spacing tokens --- */
  --space-2xs: 2px;
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 12px;
  --space-lg: 16px;
  --space-xl: 24px;
  --radius-xs: 3px;
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: 12px;
  --radius-2xl: 16px;
  --radius-full: 9999px;
  --button-padding-y: 0.75rem;
  --button-padding-x: 1.25rem;
  --button-radius: 0.5rem;
  --chip-radius: 0.375rem;
  --pill-radius: 9999px;

  /* --- Typography tokens --- */
  --font-family-sans: "Inter", "Figtree", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  --font-family-mono: "JetBrains Mono", ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;

  --font-weight-regular: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  --font-size-xs: 12px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;

  --line-height-tight: 1.25;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.6;

  /* --- Semantic aliases for markdown & prose (light) --- */
  --text-primary: hsl(var(--foreground));
  --text-secondary: hsl(var(--muted-foreground));
  --surface-muted: hsl(var(--muted));
  --surface-secondary: hsl(var(--secondary));
  --surface-code: hsl(220 14% 96%);
  --surface-hover: hsl(var(--accent));
  --accent-primary: hsl(var(--info));
  --accent-hover: hsl(217 91% 50%);
  --border-muted: hsl(var(--border));

  /* --- Chrome elevation (shadow + gradient blend for toolbar → content) --- */
  --chrome-shadow: 0 1px 2px hsl(220 20% 20% / 0.06), 0 4px 12px hsl(220 20% 20% / 0.03);

  /* --- Context progress tokens (HSL) --- */
  --context-progress-track: hsl(0 0% 0% / 0.08);
  --context-progress-low: hsl(142 76% 36%);
  --context-progress-moderate: hsl(217 91% 60%);
  --context-progress-warning: hsl(38 92% 50%);
  --context-progress-critical: hsl(0 84% 60%);
}


/* ============================================================
   Dark Theme
   Blue-tinted surfaces for character, not flat grays
   ============================================================ */

[data-theme="dark"] {
  --background: 224 71.4% 4.1%;
  --foreground: 210 20% 98%;

  --card: 224 71.4% 6%;
  --card-foreground: 210 20% 98%;

  --popover: 224 71.4% 6%;
  --popover-foreground: 210 20% 98%;

  --primary: 210 20% 98%;
  --primary-foreground: 220.9 39.3% 11%;

  --secondary: 215 27.9% 16.9%;
  --secondary-foreground: 210 20% 98%;

  --muted: 215 25% 18.5%;
  --muted-foreground: 217.9 10.6% 64.9%;

  --accent: 215 25% 20%;
  --accent-foreground: 210 20% 98%;

  --destructive: 0 62.8% 50.6%;
  --destructive-foreground: 210 20% 98%;

  --border: 215 20% 22%;
  --input: 215 20% 22%;
  --ring: 216 12.2% 83.9%;

  /* --- Extended semantic: status (brighter for dark bg) --- */
  --success: 142 71% 45%;
  --success-foreground: 0 0% 100%;
  --warning: 38 92% 55%;
  --warning-foreground: 0 0% 0%;
  --info: 217 91% 65%;
  --info-foreground: 0 0% 100%;

  /* --- Dark surface elevations (blue-tinted) --- */
  --surface-0: 224 71.4% 4.1%;
  --surface-1: 224 50% 7%;
  --surface-2: 215 28% 10%;
  --surface-3: 215 25% 14%;
  --surface-4: 215 22% 18%;

  /* --- Chrome elevation (shadow + gradient blend for toolbar → content) --- */
  --chrome-shadow: 0 1px 2px hsl(220 60% 2% / 0.2), 0 4px 12px hsl(220 60% 2% / 0.1);

  /* --- Dark shadows (blue-black for richer depth) --- */
  --shadow-xs: 0 1px 2px 0 hsl(220 60% 2% / 0.3);
  --shadow-sm: 0 1px 3px 0 hsl(220 60% 2% / 0.4), 0 1px 2px -1px hsl(220 60% 2% / 0.4);
  --shadow-md: 0 4px 6px -1px hsl(220 60% 2% / 0.4), 0 2px 4px -2px hsl(220 60% 2% / 0.4);
  --shadow-lg: 0 10px 15px -3px hsl(220 60% 2% / 0.4), 0 4px 6px -4px hsl(220 60% 2% / 0.4);
  --shadow-xl: 0 20px 25px -5px hsl(220 60% 2% / 0.5), 0 8px 10px -6px hsl(220 60% 2% / 0.5);
  --shadow-2xl: 0 25px 50px -12px hsl(220 60% 2% / 0.7);

  /* --- Layout & spacing (same for both themes) --- */
  --space-2xs: 2px;
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 12px;
  --space-lg: 16px;
  --space-xl: 24px;
  --button-padding-y: 0.75rem;
  --button-padding-x: 1.25rem;
  --button-radius: 0.5rem;
  --chip-radius: 0.375rem;
  --pill-radius: 9999px;

  /* --- Semantic aliases for markdown & prose (dark) --- */
  --text-primary: hsl(var(--foreground));
  --text-secondary: hsl(var(--muted-foreground));
  --surface-muted: hsl(var(--muted));
  --surface-secondary: hsl(var(--secondary));
  --surface-code: hsl(215 28% 10%);
  --surface-hover: hsl(var(--accent));
  --accent-primary: hsl(var(--info));
  --accent-hover: hsl(217 91% 70%);
  --border-muted: hsl(var(--border));

  /* --- Context progress tokens (dark - slightly more vibrant) --- */
  --context-progress-track: hsl(0 0% 100% / 0.08);
  --context-progress-low: hsl(142 71% 45%);
  --context-progress-moderate: hsl(217 91% 65%);
  --context-progress-warning: hsl(38 92% 55%);
  --context-progress-critical: hsl(0 62% 50%);
}

/* System preference fallback for when data-theme isn't set */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --background: 224 71.4% 4.1%;
    --foreground: 210 20% 98%;

    --card: 224 71.4% 6%;
    --card-foreground: 210 20% 98%;

    --popover: 224 71.4% 6%;
    --popover-foreground: 210 20% 98%;

    --primary: 210 20% 98%;
    --primary-foreground: 220.9 39.3% 11%;

    --secondary: 215 27.9% 16.9%;
    --secondary-foreground: 210 20% 98%;

    --muted: 215 25% 18.5%;
    --muted-foreground: 217.9 10.6% 64.9%;

    --accent: 215 25% 20%;
    --accent-foreground: 210 20% 98%;

    --destructive: 0 62.8% 50.6%;
    --destructive-foreground: 210 20% 98%;

    --border: 215 20% 22%;
    --input: 215 20% 22%;
    --ring: 216 12.2% 83.9%;

    --success: 142 71% 45%;
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 55%;
    --warning-foreground: 0 0% 0%;
    --info: 217 91% 65%;
    --info-foreground: 0 0% 100%;

    --surface-0: 224 71.4% 4.1%;
    --surface-1: 224 50% 7%;
    --surface-2: 215 28% 10%;
    --surface-3: 215 25% 14%;
    --surface-4: 215 22% 18%;

    --shadow-xs: 0 1px 2px 0 hsl(220 60% 2% / 0.3);
    --shadow-sm: 0 1px 3px 0 hsl(220 60% 2% / 0.4), 0 1px 2px -1px hsl(220 60% 2% / 0.4);
    --shadow-md: 0 4px 6px -1px hsl(220 60% 2% / 0.4), 0 2px 4px -2px hsl(220 60% 2% / 0.4);
    --shadow-lg: 0 10px 15px -3px hsl(220 60% 2% / 0.4), 0 4px 6px -4px hsl(220 60% 2% / 0.4);
    --shadow-xl: 0 20px 25px -5px hsl(220 60% 2% / 0.5), 0 8px 10px -6px hsl(220 60% 2% / 0.5);
    --shadow-2xl: 0 25px 50px -12px hsl(220 60% 2% / 0.7);

    /* --- Semantic aliases for markdown & prose (dark fallback) --- */
    --text-primary: hsl(var(--foreground));
    --text-secondary: hsl(var(--muted-foreground));
    --surface-muted: hsl(var(--muted));
    --surface-secondary: hsl(var(--secondary));
    --surface-code: hsl(215 28% 10%);
    --surface-hover: hsl(var(--accent));
    --accent-primary: hsl(var(--info));
    --accent-hover: hsl(217 91% 70%);
    --border-muted: hsl(var(--border));

    --context-progress-track: hsl(0 0% 100% / 0.08);
    --context-progress-low: hsl(142 71% 45%);
    --context-progress-moderate: hsl(217 91% 65%);
    --context-progress-warning: hsl(38 92% 55%);
    --context-progress-critical: hsl(0 62% 50%);
  }
}
